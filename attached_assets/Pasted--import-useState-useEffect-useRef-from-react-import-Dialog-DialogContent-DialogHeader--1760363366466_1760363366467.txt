
import { useState, useEffect, useRef } from "react";
import { Dialog, DialogContent, DialogHeader, DialogTitle } from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
import { Checkbox } from "@/components/ui/checkbox";
import { useMutation, useQueryClient, useQuery } from "@tanstack/react-query";
import { apiRequest } from "@/lib/queryClient";
import { useToast } from "@/hooks/use-toast";
import { isUnauthorizedError } from "@/lib/authUtils";
import { Plus, ImageIcon } from "lucide-react";
import type { Prompt, Collection } from "@shared/schema";
import { PromptImageUploader } from "./PromptImageUploader";
import { PromptAIExtractor } from "./PromptAIExtractor";
import { PromptAutoFill } from "./PromptAutoFill";

interface PromptModalProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  prompt?: Prompt | null;
  mode: "create" | "edit";
  defaultCollectionId?: string;
  onSuccess?: (prompt: Prompt) => void;
}

export function PromptModal({ open, onOpenChange, prompt, mode, defaultCollectionId, onSuccess }: PromptModalProps) {
  const [showCreateCollection, setShowCreateCollection] = useState(false);
  const [newCollectionName, setNewCollectionName] = useState("");
  const [newCollectionDescription, setNewCollectionDescription] = useState("");
  const [newCollectionIsPublic, setNewCollectionIsPublic] = useState(false);
  
  // States for creating new options
  const [showCreateCategory, setShowCreateCategory] = useState(false);
  const [newCategoryName, setNewCategoryName] = useState("");
  const [showCreatePromptType, setShowCreatePromptType] = useState(false);
  const [newPromptTypeName, setNewPromptTypeName] = useState("");
  const [showCreatePromptStyle, setShowCreatePromptStyle] = useState(false);
  const [newPromptStyleName, setNewPromptStyleName] = useState("");
  const [showCreateIntendedGenerator, setShowCreateIntendedGenerator] = useState(false);
  const [newIntendedGeneratorName, setNewIntendedGeneratorName] = useState("");
  const [showCreateRecommendedModel, setShowCreateRecommendedModel] = useState(false);
  const [newRecommendedModelName, setNewRecommendedModelName] = useState("");

  // Arrays to store custom options
  const [customCategories, setCustomCategories] = useState<string[]>([]);
  const [customPromptTypes, setCustomPromptTypes] = useState<string[]>([]);
  const [customPromptStyles, setCustomPromptStyles] = useState<string[]>([]);
  const [customIntendedGenerators, setCustomIntendedGenerators] = useState<string[]>([]);
  const [customRecommendedModels, setCustomRecommendedModels] = useState<string[]>([]);
  
  // AI extraction state
  const [showAIExtractor, setShowAIExtractor] = useState(false);
  
  // Simple initial state
  const getInitialFormData = () => {
    // If we have prepopulated data in create mode, use it
    if (mode === "create" && prompt) {
      console.log('Initializing form with prepopulated data:', prompt);
      return {
        name: prompt.name || "",
        description: "",
        category: "",
        promptContent: prompt.promptContent || "",
        negativePrompt: "",
        promptType: "",
        promptStyle: prompt.promptStyle || "",
        tags: "",
        isPublic: false,
            <CardContent>

SQL console

Database studio

schema:
public
Search...













































































Powered by









Add record

12 rows•271ms


50
0



    });
  }

  // Update underline position on route change
  useEffect(() => {
    const activeKey = location.startsWith('/community') ? '/community' 
      : location.startsWith('/library') ? '/library' 
      : location.startsWith('/admin') ? '/admin'
      : location.startsWith('/dev') ? '/dev'
      : '/';
    positionTo(linkRefs.current[activeKey], activeKey);
  }, [location]);

  // Handle window resize
  useEffect(() => {
    const onResize = () => {
      const activeKey = location.startsWith('/community') ? '/community' 
        : location.startsWith('/library') ? '/library' 
        : location.startsWith('/admin') ? '/admin'
        : location.startsWith('/dev') ? '/dev'
        : '/';
      positionTo(linkRefs.current[activeKey], activeKey);
    };
    window.addEventListener('resize', onResize);
    return () => window.removeEventListener('resize', onResize);
  }, [location]);

  if (isLoading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="text-center">
          <img 
            src="/ATRIUM2 090725.png" 
            alt="PromptAtrium Logo" 
            className="w-8 h-8 object-contain mx-auto mb-4 animate-pulse"
          />
          <p className="text-muted-foreground">Loading...</p>
        </div>
      </div>
    );
  }

  if (!isAuthenticated) {
    return null; // Will redirect via useEffect
  }

  return (
    <div className="min-h-screen relative">
      {/* Background decorative elements */}
      <div className="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div className="absolute top-20 left-10 w-96 h-96 bg-indigo-900/10 rounded-full blur-xl"></div>
        <div className="absolute bottom-10 right-10 w-80 h-80 bg-purple-900/10 rounded-full blur-xl"></div>
        <div className="absolute top-40 right-20 w-64 h-64 bg-cyan-900/10 rounded-full blur-xl"></div>

        {/* Decorative grid lines */}
        <div className="absolute inset-0 grid grid-cols-12 opacity-0 pointer-events-none">
          {Array.from({ length: 12 }).map((_, i) => (
            <div key={`col-${i}`} className="border-r border-cyan-500"></div>
          ))}
        </div>
      </div>

      {/* Header */}
      <header className="fixed top-0 left-0 right-0 bg-gray-900/70 backdrop-blur-sm boder-transparent border-cyan-500/30 z-50 transition-all duration-300 boder-transparent">
        <div className="container mx-auto px-1 sm:px-1 md:px-1 py-1 flex items-center justify-between">
          <div className="flex items-center space-x-4 md:space-x-8">
            <Link href="/" className="flex items-center space-x-2 md:space-x-3 hover:opacity-80 transition-opacity">
              {/* Futuristic Logo */}
              <div className="relative mr-2">
                <div className="absolute inset-0 bg-orange-100/20 rounded-lg blur-lg"></div>
                <div className="w-10 h-10">
                  <div className="absolute inset-[3px] bg-transparent rounded-[16px] flex items-center justify-center overflow-hidden">
                    <div className="absolute inset-0 bg-gradient-to-br from-indigo-900/20 to-purple-900/20"></div>
                    <img 
                      src="/ATRIUM2 090725.png" 
                      alt="PromptAtrium Logo" 
                      className="w-8 h-8 object-contain relative z-10"
                    />
                  </div>
                </div>
              </div>
              <h1 className="text-xl font-bold bg-gradient-to-b from-orange-400 to-purple-200 to-orange-400 bg-clip-text text-transparent">PromptAtrium</h1>
            </Link>

            <nav 
              ref={navRef}
              className="hidden md:flex items-center space-x-1 relative"
              onMouseLeave={() => {
                const activeKey = location.startsWith('/community') ? '/community' 
                  : location.startsWith('/library') ? '/library' 
                  : location.startsWith('/admin') ? '/admin' 
                  : '/';
                positionTo(linkRefs.current[activeKey], activeKey);
              }}
            >
              <div 
                ref={setLinkRef('/')}
                onMouseEnter={(e) => positionTo(e.currentTarget as HTMLElement, '/')}
              >
                <Link 
                  href="/" 
                  className={isActiveRoute("/") ? "text-bold text-cyan-200 px-4 py-2 rounded-md bg-transparent border border-transparent inline-block" : "text-gray-300 px-4 py-2 rounded-md transition-colors duration-200 inline-block"} 
Chats
Archived
Add semi-transparent black layer background
17 hours ago
Add send button to collected terms tab
26 days ago
Untitled
26 days ago
Modal background blur and transparency
27 days ago
Prompt card expansion button confusion
29 days ago
Tab background opacity adjustment
30 days ago
Mobile dropdown navigation right side
30 days ago
Semi-transparent purple toast notifications
30 days ago
Add Resources menu item to navigation header
1 month ago
PromptCardBeam image path customization
1 month ago
My Collections button links to wrong tab
1 month ago
Profile settings calendar icon code
1 month ago
@layer base {

{
@apply border-border;
}
body {
@apply font-sans antialiased text-foreground;
font-family: var(--font-sans);
background:
radial-gradient(ellipse at 30% 20%, rgba(56, 189, 248, 0.2) 0%, rgba(139, 92, 246, 0.15) 40%, rgba(236, 72, 153, 0.125) 70%, rgba(10, 10, 10, 0.4) 100%),
linear-gradient(to bottom, var(--background-layer), var(--background-layer));
min-height: 100vh;
}
}
how can i add a semi-transparent black layer on top of our background in order to darken it

WS

wisdomfromher
Assistant
17 hours ago
To add a semi-transparent black layer on top of your background to darken it, you can add another layer to your gradient stack. Here's the updated CSS:

client/src/index.css
Add semi-transparent black overlay to darken background
The key is adding linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)) as the first layer in the background stack. This creates a semi-transparent black overlay with 30% opacity. You can adjust the 0.3 value to make it darker (higher values up to 1.0) or lighter (lower values).

how can i make the quick actions buttons bg on hover be transparent.
on hover i would like the icons to slightly grow and brighten instead

WS

wisdomfromher
Assistant
6 minutes ago
I'll help you update the Quick Actions buttons to have transparent backgrounds on hover, with icons that slightly grow and brighten instead.

client/src/components/QuickActions.tsx
The changes I've made:

Added hover:bg-transparent to each button to remove the background color on hover
Added group class to each button to enable group-based hover effects
Added transition-transform group-hover:scale-110 to the icon containers to make them grow slightly (10%) on hover
Added transition-all group-hover:brightness-150 to the icons to make them brighten (50% brighter) on hover
Now when you hover over any Quick Actions button, the background will remain transparent while the icons smoothly grow and brighten.

Checkpoint made
Update Quick Actions button hover effects
24 minutes ago
•
i would like to do the same to our buttons in the mobilepagenav.tsx

WS

wisdomfromher
Assistant
4 minutes ago
I'll update the MobilePageNav buttons to have transparent backgrounds on hover with icons that slightly grow and brighten instead.

client/src/components/MobilePageNav.tsx
Checkpoint made
Update mobile nav hover effects
19 minutes ago
•
how do i change the background color for when the button is not the current page

WS

wisdomfromher
Assistant
just now
I can see from the screenshot that you want to change the background color of the mobile navigation buttons when they're not the active page. Currently, the "My Prompts" button has a blue/purple gradient background since it's active, and you want to style the "Community Prompts" button differently.

Looking at the code, when a button is NOT the current page, it has the class hover:bg-transparent. You can add a default background color by modifying the button classes in MobilePageNav.tsx:

client/src/components/MobilePageNav.tsx
Add background color for inactive buttons, Add background color for inactive community button
This change sets the inactive buttons to have a transparent background by default, and when hovered, they'll have a subtle white overlay (bg-white/5). You can adjust the opacity (the /5 part) to make it more or less visible - try /10 for more visibility or /3 for less.

If you want a different color entirely (like a dark background), you could use something like bg-gray-800/50 or bg-black/30 instead.


Scroll to latest
Assistant mode

advanced
Claude 4.5 Sonnet

Ask Assistant, use @ to include specific files...
/codex

Production
Status
wd published about 4 hours ago
Visibility
Public
Domain
https://promptatrium.replit.app
Type
Autoscale
(4 vCPU / 8 GiB RAM / 3 Max)
See all usage
Database
Production database connected
c282f920
WS

wisdomfromher
wd
published about 4 hours ago
52269ecc
WS

wisdomfromher
wd
published about 6 hours ago
14cbb895
WS

wisdomfromher
wd
published about 8 hours ago
d7abb66a
WS

wisdomfromher
wd
published about 15 hours ago
2cf17b33
WS

wisdomfromher
wd
published about 15 hours ago
a838a7e9
WS

wisdomfromher
wd
published about 19 hours ago
70e2e432
WS

wisdomfromher
wd
published 19 days ago
dea5e282
WS

wisdomfromher
wd
published 19 days ago
5c69d7e5
WS

wisdomfromher
wd
published 19 days ago
2aea6dc2
WS

wisdomfromher
wd
published 20 days ago
440e4794
WS

wisdomfromher
wd
published 24 days ago
80c8ccf8
WS

wisdomfromher
wd
published 25 days ago
72353796
WS

wisdomfromher
wd
published 25 days ago
daaa3388
WS

wisdomfromher
wd
published 26 days ago
4ed35efb
WS

wisdomfromher
wd
published 26 days ago
75aeccd2
WS

wisdomfromher
wd
published 26 days ago
0db0fe80
WS

wisdomfromher
wd
published 26 days ago
9c06e488
WS

wisdomfromher
wd
published 26 days ago
c9fc111e
WS

wisdomfromher
wd
published 26 days ago
41a8a51e
WS

wisdomfromher
wd
published 27 days ago
dcf1e72e
WS

wisdomfromher
wd
published 27 days ago
d04fff35
WS

wisdomfromher
wd
published 27 days ago
Selection deleted
import { Button } from "@/components/ui/button";
import { Plus, FolderPlus, ChartScatter, FileUp, RatioIcon, FileSearch, Sparkles, BookOpen, Lock } from "lucide-react";
import { Link } from "wouter";
import { useToast } from "@/hooks/use-toast";

interface QuickActionsProps {
  onCreatePrompt: () => void;
  onCreateCollection: () => void;
  onStartProject: () => void;
  onImportPrompts: () => void;
}

export function QuickActions({ 
  onCreatePrompt, 
  onCreateCollection, 
  onStartProject, 
  onImportPrompts 
}: QuickActionsProps) {
  const { toast } = useToast();
  
  const handleComingSoon = (feature: string) => {
    toast({
      title: "Coming Soon",
      description: `${feature} will be available soon!`,
    });
  };

  return (
    <div data-testid="card-quick-actions">
      <h3 className="text-base md:text-xl font-semibold mb-2 md:mb-3">Tools</h3>
        <div className="grid grid-cols-4 gap-2 md:grid-cols-2 md:gap-2 lg:grid-cols-2 lg:gap-2 lg:space-y-0">
        
          
          
          
          <Button
          variant="ghost"
          className="flex flex-col items-center justify-center p-1 h-auto md:flex-row md:justify-start md:w-full md:p-2 hover:bg-transparent group"
          onClick={onCreatePrompt}
          data-testid="button-create-prompt"
        >
          <div className="w-8 h-8 md:w-7 md:h-7 bg-blue-500/0 rounded-md flex items-center justify-center mb-1 md:mb-0 md:mr-2 flex-shrink-0 transition-transform group-hover:scale-150">
            <Plus className="h-4 w-4 text-primary transition-all group-hover:brightness-150" />
          </div>
          <div className="text-center  md:text-left">
            <p className="text-xs md:text-base font-medium text-foreground">Add Prompt</p>
            <p className="text-xs text-muted-foreground hidden md:block">Add a prompt</p>
          </div>
        </Button>


          
  
          
          {/* Quick Prompt Generator */}
          <Link href="/tools/quick-prompter" className="contents">
            <Button
              variant="ghost"
              className="flex flex-col items-center justify-center p-1 h-auto md:flex-row md:justify-start md:w-full md:p-2 hover:bg-transparent group"
              data-testid="button-prompt-generator"
            >
              <div className="w-8 h-8 md:w-7 md:h-7 bg-purple-500/0 rounded-md flex items-center justify-center mb-1 md:mb-0 md:mr-2 flex-shrink-0 transition-transform group-hover:scale-150">
                <Sparkles className="h-4 w-4 text-purple-500 transition-all group-hover:brightness-150" />
              </div>
              <div className="text-center md:text-left">
                <p className="text-xs md:text-base font-medium text-foreground">Generate Prompt</p>
                <p className="text-xs text-muted-foreground hidden md:block">AI prompt generator</p>
              </div>
            </Button>
          </Link>
     
          
          
          <Button
          variant="ghost"
          className="flex flex-col items-center justify-center p-1 h-auto md:flex-row md:justify-start md:w-full md:p-2 hover:bg-transparent group"
          onClick={onImportPrompts}
          data-testid="button-import-prompts"
        >
          <div className="w-8 h-8 md:w-7 md:h-7 bg-yellow-500/0 rounded-md flex items-center justify-center mb-1 md:mb-0 md:mr-2 flex-shrink-0 transition-transform group-hover:scale-150">
            <FileUp className="h-4 w-4 text-yellow-500 transition-all group-hover:brightness-150" />
          </div>
          <div className="text-center md:text-left">
            <p className="text-xs md:text-base font-medium text-foreground">Import Prompts</p>
            <p className="text-xs text-muted-foreground hidden md:block">Bulk import from file</p>
          </div>
        </Button>

        <Link href="/tools/metadata-analyzer" className="contents">
          <Button
    const subject = encodeURIComponent(`Check out this prompt: ${prompt.name}`);
              <motion.div
                animate={isAnimatingLike ? {
                  scale: [1, 1.9, 0.9, 1.1, 1],
                  rotate: [0, -10, 20, -5, 0]
                } : {}}
                transition={{ duration: 0.5, ease: "easeInOut" }}
              >
                <Heart 
                  className={`h-4 w-4 transition-all duration-200 ${isLiked ? 'fill-red-600' : 'hover:fill-red-200'}`} 
                />
              </motion.div>
              <span className={`text-sm font-medium transition-colors duration-200 ${isLiked ? 'text-red-600' : 'text-muted-foreground'}`}>
                {prompt.likes || 0}
              </span>
            </Button>
          </div>
          <div className="flex items-center space-x-1 ml-4">
            {showActions ? (
              <div className="flex items-center space-x-1" data-testid={`actions-personal-${prompt.id}`}>
                {/* Only show Edit and Collections buttons if user is owner or admin */}
                {typedUser?.id && (String(typedUser.id) === String(prompt.userId) || isSuperAdmin) && (
                  <>
                    {/* Edit Button - Green edit icon */}
                    <Button
                      size="sm"
                      variant="ghost"
                      onClick={() => onEdit?.(prompt)}
                      className="h-8 w-8 p-0 text-green-600 hover:bg-green-50 dark:hover:bg-green-950/20 transition-all duration-200 hover:scale-110 active:scale-95"
                      data-testid={`button-edit-${prompt.id}`}
                    >
                      <Edit className="h-4 w-4" />
                    </Button>

                    {/* 3. Collections - Yellow folder with dropdown */}
                    <DropdownMenu>
                      <DropdownMenuTrigger asChild>
                        <Button
                          size="sm"
                          variant="ghost"
                          className="h-8 w-8 p-0 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-950/20 transition-all duration-200 hover:scale-110 active:scale-95"
                          data-testid={`button-collections-${prompt.id}`}
                        >
                          <Folder className="h-4 w-4" />
                        </Button>
                      </DropdownMenuTrigger>
                      <DropdownMenuContent>
                        <DropdownMenuItem onClick={() => toast({ title: "Collections", description: "Collection management coming soon!" })}>
                          Add to Collection
                        </DropdownMenuItem>
                        <DropdownMenuItem onClick={() => toast({ title: "Collections", description: "Collection management coming soon!" })}>
                          Create New Collection
                        </DropdownMenuItem>
                      </DropdownMenuContent>
                    </DropdownMenu>
                  </>
                )}

                {/* 4. Share Menu - Share icon with dropdown */}
                <DropdownMenu>
                  <DropdownMenuTrigger asChild>
                    <Button
                      size="sm"
                      variant="ghost"
                      className="h-8 w-8 p-0 text-sky-500 hover:bg-sky-50 dark:hover:bg-sky-950/20 transition-all duration-200 hover:scale-110 active:scale-95"
                      data-testid={`button-share-${prompt.id}`}
                    >
                      <Share2 className="h-4 w-4" />
                    </Button>
                  </DropdownMenuTrigger>
                  <DropdownMenuContent>
                    <DropdownMenuItem onClick={handleCopyLink}>
                      Share Link
                    </DropdownMenuItem>
                    <DropdownMenuItem onClick={handleCopyJSON}>
                      Copy JSON
                    </DropdownMenuItem>
                    <DropdownMenuItem onClick={handleEmailPrompt}>
                      Email Prompt
                    </DropdownMenuItem>
                    <DropdownMenuItem onClick={handleSaveToGoogleDrive}>
import { Link, useLocation } from "wouter";
import { Button } from "@/components/ui/button";
import { FileText, Users } from "lucide-react";

export function MobilePageNav() {
  const [location] = useLocation();
  const isLibraryPage = location === "/library";
  const isCommunityPage = location === "/community";

  return (
    <div className="block lg:hidden fixed bottom-0 left-0 right-0 z-50 bg-background/95 dark:bg-background/95 backdrop-blur-sm border-t border-border p-3 pb-safe">
      <div className="flex gap-2 max-w-screen-xl mx-auto">
        <Link href="/library" className="flex-1">
         
          
          
          <Button 
            variant="outline"
            className={`w-full relative group ${isLibraryPage ? 'button-gradient-library hover:color-white' : 'bg-transparent hover:bg-white/5'}`}
            data-testid="button-my-prompts"
          >
            <FileText className={`h-4 w-4 mr-2 text-white transition-all ${!isLibraryPage ? 'group-hover:scale-110 group-hover:brightness-150' : ''}`} />
            <span className={!isLibraryPage ? 'nav-gradient-library' : ''}>My Prompts</span>
            {isLibraryPage && (
              <span className="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full" />
            )}
          </Button>
        </Link>
        <Link href="/community" className="flex-1">
       
          
          
          
          <Button 
            variant="outline"
            className={`w-full relative group ${isCommunityPage ? 'button-gradient-community hover:color-white' : 'bg-transparent hover:bg-white/5'}`}
            data-testid="button-community-prompts"
          >
            <Users className={`h-4 w-4 mr-2 text-white transition-all ${!isCommunityPage ? 'group-hover:scale-110 group-hover:brightness-150' : ''}`} />
            <span className={!isCommunityPage ? 'nav-gradient-community' : ''}>Community Prompts</span>
            {isCommunityPage && (
              <span className="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full" />
            )}
          </Button>
        </Link>
      </div>
    </div>
  );
}
Saved your changes before starting work
how come my terms arent loading when I click on a category in the Wordsmith Codex?